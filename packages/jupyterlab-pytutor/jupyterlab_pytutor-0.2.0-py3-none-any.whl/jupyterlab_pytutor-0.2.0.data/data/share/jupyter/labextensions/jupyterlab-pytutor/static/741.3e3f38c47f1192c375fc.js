"use strict";(self.webpackChunkjupyterlab_pytutor=self.webpackChunkjupyterlab_pytutor||[]).push([[741],{741:(t,e,o)=>{o.r(e),o.d(e,{PyTutorExtension:()=>p,default:()=>h,teachIcon:()=>r});var s=o(200),l=o(35),n=o(717),i=o(833),a=o(778);const r=new l.LabIcon({name:"jupyterlab-pytutor:icon",svgstr:'<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" class="jp-icon3 jp-icon-selectable" fill="#616161"><path d="M0 0h24v24H0V0z" fill="none"/><path d="M12 3L1 9l4 2.18v6L12 21l7-3.82v-6l2-1.09V17h2V9L12 3zm6.82 6L12 12.72 5.18 9 12 5.28 18.82 9zM17 15.99l-5 2.73-5-2.73v-3.72L12 15l5-2.73v3.72z"/></svg>'}),c={id:"jupyterlab-pytutor:plugin",autoStart:!0,requires:[s.ISettingRegistry],activate:(t,e)=>{let o,s;const{shell:l}=t,n=()=>{s&&(s.settings=o),s=new p(l,o),t.docRegistry.addWidgetExtension("Notebook",s)};e.load(c.id).then((t=>{console.log(t),o=t,n(),t.changed.connect(n)}))}};class p{constructor(t,e){this._shell=t,this.settings=e}createNew(t,e){const o=()=>{const e=this.settings.get("add_cell_separators").composite;let o="";const s=t.content.widgets.filter((e=>t.content.isSelectedOrActive(e)&&"code"===e.model.type)).length;console.log("nCodeCells",s);let l=0;t.content.widgets.forEach(((n,i)=>{t.content.isSelectedOrActive(n)&&"code"===n.model.type&&(e&&s>=2&&(o+="###############################\n",o+=`# Cell ${l}\n`,o+="###############################\n"),console.log("code cell",i),o+=`${n.model.sharedModel.source}\n`,e&&l+1<s&&(o+="\n"),++l)})),void 0===this._pytutorPanel||this._pytutorPanel.isDisposed?(this._pytutorPanel=new u(o),this._shell.add(this._pytutorPanel,"main",{mode:"split-right"})):this._pytutorPanel.changeSourceCode(o)};console.log("panel.content.defaultKernelLanguage");{const e=new i.ToolbarButton({className:"pytutor-button",label:"pytutor",onClick:o,tooltip:"Run PyTutor"});return t.toolbar.insertItem(10,"PyTutor",e),new n.DisposableDelegate((()=>{e.dispose()}))}}}class u extends a.StackedPanel{constructor(t){super(),this.addClass("jp-RovaPanel"),this.id="pytutor-output-panel",this.title.label="PyTutor",this.title.icon=r,this.title.closable=!0,this._pytutorPanel=new d(t),this.addWidget(this._pytutorPanel)}changeSourceCode(t){this._pytutorPanel.dispose(),this._pytutorPanel=new d(t),this.addWidget(this._pytutorPanel)}dispose(){this._pytutorPanel.dispose(),super.dispose()}onCloseRequest(t){super.onCloseRequest(t),this.dispose()}}class d extends i.IFrame{constructor(t){super(),console.log("SRC: ",t),this.url=`https://pythontutor.com/iframe-embed.html#code=${encodeURIComponent(t)}&codeDivHeight=900&codeDivWidth=350&cumulative=true&curInstr=0&heapPrimitives=nevernest&origin=opt-frontend.js&py=3&rawInputLstJSON=%5B%5D&textReferences=false`,console.log("Full URL: ",this.url),this.id="PyTutor",this.title.closable=!1,this.node.style.overflowY="auto",this.node.style.background="#FFF",this.sandbox=["allow-forms","allow-modals","allow-orientation-lock","allow-pointer-lock","allow-popups","allow-presentation","allow-same-origin","allow-scripts","allow-top-navigation","allow-top-navigation-by-user-activation"]}}const h=c}}]);